<h1>Listing expenses</h1>

<table class="table table-striped">
  <thead>
    <tr>
      <th><%= sortable "date" %></th>
      <th class="visible-md visible-lg"><%= sortable "reseller" %></th>
      <th><%= sortable "item_or_service", "Item or service" %></th>
      <th class="visible-md visible-lg"><%= sortable "payment_form", "Payment form" %></th>
      <th class="visible-md visible-lg"><%= sortable "charged_to", "Charged to" %></th>
      <th><%= sortable "cost" %></th>
      <th class="visible-md visible-lg"><%= sortable "amount_from_budget", "From budget" %></th>
      <th  class="visible-lg" colspan="3">More Options</th>
    </tr>
  </thead>
  <tbody>
    <% @expenses.each do |expense| %>
      <tr>
        <td><%= expense.date %></td>
        <td class="visible-md visible-lg"><%= expense.reseller %></td>
        <td><%= expense.item_or_service %></td>
        <td class="visible-md visible-lg"><%= expense.payment_form %></td>
        <td class="visible-md visible-lg"><%= expense.charged_to %></td>
        <td><%= expense.cost %></td>
        <td class="visible-md visible-lg"><%= expense.amount_from_budget %></td>
        <td class="visible-lg"><%= link_to 'Show', expense %></td>
        <td class="visible-lg"><%= link_to 'Edit', edit_expense_path(expense) %></td>
        <td class="visible-lg"><%= link_to 'Destroy', expense, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

  <%= will_paginate %>
  <div class="action-buttons-inline">
    <ul class="list-inline">
      <li><%= link_to 'New Expense', new_expense_path, class: 'btn btn-primary' %></li>
      <li><a href="#" id="import-button" class="btn btn-warning" data-toggle="modal" data-target="#import-modal"><i class="fa fa-external-link-square"></i> Import Expenses</a></li>
    </ul>
  </div>
<br>

<p><%= "The total amount spend from budget so far is $#{Expense.sum(:amount_from_budget)}" %></p>

<p><%= "The total budget for this year is $#{Configurable.total_budget}." %></p>

<p><%= "This means, we have $#{Configurable.total_budget.to_f - Expense.sum(:amount_from_budget)} left to spend!" %></p>

<%= render 'partials/modals' %>
